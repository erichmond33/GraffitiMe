{% load socialaccount %} 
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Graffiti Banner</title>
  <link href="{% static 'graffiti/style.css' %}" rel="stylesheet">
  <link href="{% static 'graffiti/bootstrap-grid.css' %}" rel="stylesheet">
  <script src="https://unpkg.com/fabric@5.3.0/dist/fabric.min.js"></script>
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->
</head>
<body>

  <div id="mySidebar" class="sidebar">
      <a href="{% url 'upload' username %}">Upload a new banner</a>
      <a href="#" onclick="copyPageLink()">Share your page link</a> <script>function copyPageLink() {var copyText = window.location.href;navigator.clipboard.writeText(copyText);alert("Copied the link: " + copyText);} </script>
      <a href="{% url 'account_logout' %}">Log out</a>
  </div>

  <div class="" id="canvasContainer">
    <canvas id="canvas" width="1500" height="500">
    </canvas>
  </div>
  <div class="row">
    <div class="col">
      {% if user.is_authenticated and user.username == username %}
        <button class="open-btn button" onclick="openNav()"><img src="{% static 'graffiti/burger.svg' %}" alt="menu" width="20px" height="20px"></button>
      {% endif %}
      {% if user.is_authenticated and user.username != username %}
      <small id="helpMessage"><a href="{% url 'graffiti' requester_username %}">Go to your banner</a></small>
        {% endif %}
        {% if not user.is_authenticated %}
        <small id="helpMessage"><a href="{% provider_login_url 'twitter' %}">Add notes to <i>YOUR</i> Twitter profile</a></small>
      {% endif %}    
    </div>
  </div>

  <div class="container" id="form-container">
    <div class="formWidth"> 
      <div class="row">
        <div class="col d-flex justify-content-end align-items-center">
          <small id="opacityLabel">Full-color</small>
          <label>
            <input type="checkbox" id="opacityToggle" class="checkbox">
          </label>
        </div>
      </div>
    </div>

    <div class="formWidth" id="form">
    {% csrf_token %}
      <div class="row feature" id="zoom">
        <div class="col-6 d-flex align-items-center">
          <label for="text">Zoom in/out</label>
        </div>
        <div class="col-6">
          <div id="zoomButtons">
            <button id="zoomInButton">+</button>
            <button id="zoomOutButton">-</button>
          </div>
        </div>
      </div>

      <div class="row feature">
        <div class="col-3 d-flex align-items-center">
          <label for="text">Text</label>
        </div>
        <div class="col-9">
          <textarea id="textInput" required placeholder="leave a note"></textarea>
        </div>
        <div class="col">
          <small id="hint">P.S. Drag the text :)</small>
        </div>
      </div>

      <div class="row feature">
        <div class="col-3 d-flex align-items-center">
          <label>Font</label>
        </div>
        <div class="col-9">
          <select id="fontSelector">
            <option value="Trebuchet MS">Trebuchet MS</option>
            <option value="aAttackGraffiti">Attack Graffiti</option>
            <option value="adrip1">Adrip1</option>
            <option value="docallismeonstreet">Docallismeon Street</option>
            <option value="punkkid">Punk Kid</option>
            <option value="StreetWars">Street Wars</option>
            <option value="TheBattleCont">The Battle Continued</option>
            <option value="throwupz">Throw Upz</option>
          </select>
        </div>
      </div>

      <div class="row feature">
        <div class="col-8 d-flex align-items-center">
          <label for="singleColor">Single color fill</label>
        </div>
        <div class="col-4">
          <input type="color" id="singleColor" value="#000000">
        </div>
      </div>
      <div class="row feature">
        <div class="col-8 d-flex align-items-center">
          <label for="color1">Gradient color 1</label>
        </div>
        <div class="col-4">
          <input type="color" id="color1" value="#50f2e7">
        </div>

        <div class="col-8 d-flex align-items-center">
          <label for="color1">Gradient color 2</label>
        </div>
        <div class="col-4">
          <input type="color" id="color2" value="#00ff00">
        </div>
      </div>
      
      <div class="row">
        <div class="col">
          <small id="goodMessage"></small>
          <small id="errorMessage"></small>
          <small id="profileLink" hidden><a href="https://twitter.com/{{ username }}" target="_blank">Check it out</a></small>
          <button id="saveButton" class="button fullLengthButton">Update {{ name }}'s banner</button>
        </div>
      </div>
    </div>

    <p id="footer">Created by <a href="https://twitter.com/eerichmond33" target="_blank">Eli Richmond</a></p>
  </div>
  

  
  <script src="{% static 'graffiti/script.js' %}"></script>
  <p id="username" username="{{ username }}" hidden></p>
</body>
<script>
  function openNav() {
    // Check if the width of side bar > 0
    if (document.getElementById("mySidebar").style.width > "0px") {
        document.getElementById("mySidebar").style.width = "0px";
    }
    else {
      document.getElementById("mySidebar").style.width =  "250px";
    }
  }
</script>
</html>